<?xml version="1.0" encoding="UTF-8"?>

<?import io.github.palexdev.materialfx.controls.MFXButton?>
<?import io.github.palexdev.materialfx.controls.MFXPasswordField?>
<?import io.github.palexdev.materialfx.controls.MFXTextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controller.ProfileController">
    <top>
        <VBox style="-fx-background-color: #2c3e50;" BorderPane.alignment="CENTER">
            <children>
                <HBox alignment="CENTER_LEFT" prefHeight="80.0">
                    <children>
                        <Label text="My Profile" textFill="WHITE">
                            <font>
                                <Font name="Segoe UI Bold" size="24.0" />
                            </font>
                        </Label>
                    </children>
                    <padding>
                        <Insets left="30.0" />
                    </padding>
                </HBox>
            </children>
        </VBox>
    </top>
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-background-color: #ecf0f1;">
            <tabs>
                <!-- TAB 1: USER INFO -->
                <Tab text="Personal Info">
                    <VBox alignment="TOP_CENTER" spacing="20.0">
                        <padding><Insets top="30" bottom="30" /></padding>
                        <VBox alignment="CENTER" maxWidth="600.0" spacing="15.0" style="-fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2); -fx-background-radius: 5;">
                            <padding>
                                <Insets bottom="30.0" left="40.0" right="40.0" top="30.0" />
                            </padding>
                            <children>
                                <Label text="Update Information" textFill="#2c3e50">
                                    <font><Font name="Segoe UI Semibold" size="18.0" /></font>
                                </Label>
                                <MFXTextField fx:id="nameField" floatMode="BORDER" floatingText="Full Name" prefWidth="500.0" />
                                <HBox spacing="20.0">
                                    <MFXTextField fx:id="phoneField" floatMode="BORDER" floatingText="Phone Number" prefWidth="240.0" />
                                    <MFXTextField fx:id="emailField" floatMode="BORDER" floatingText="Email" prefWidth="240.0" />
                                </HBox>
                                <MFXTextField fx:id="addressField" floatMode="BORDER" floatingText="Delivery Address" prefWidth="500.0" />
                                <Label text="Security" textFill="#2c3e50">
                                    <font><Font name="Segoe UI Semibold" size="18.0" /></font>
                                    <VBox.margin><Insets bottom="5.0" top="10.0" /></VBox.margin>
                                </Label>
                                <MFXPasswordField fx:id="passwordField" floatMode="BORDER" floatingText="New Password (Optional)" prefWidth="500.0" />
                                <MFXButton onAction="#handleSave" prefHeight="45.0" prefWidth="500.0" style="-fx-background-color: #2980b9; -fx-text-fill: white;" text="Save Changes">
                                    <font><Font name="System Bold" size="14.0" /></font>
                                </MFXButton>
                            </children>
                        </VBox>
                    </VBox>
                </Tab>

                <!-- TAB 2: ORDER HISTORY -->
                <Tab text="Order History">
                    <VBox spacing="10.0">
                        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                        <TableView fx:id="orderTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="colOrderId" text="Order ID" prefWidth="80"/>
                                <TableColumn fx:id="colDate" text="Date" prefWidth="150"/>
                                <TableColumn fx:id="colStatus" text="Status" prefWidth="120"/>
                                <TableColumn fx:id="colTotal" text="Total Amount" prefWidth="120"/>
                                <TableColumn fx:id="colDelivered" text="Delivered At" prefWidth="150"/>
                            </columns>
                        </TableView>
                        <MFXButton onAction="#handleRefreshOrders" text="Refresh Orders" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/>
                    </VBox>
                </Tab>

                <!-- TAB 3: MESSAGES -->
                <Tab text="My Messages">
                    <VBox spacing="10.0">
                        <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                        <ListView fx:id="messageList" VBox.vgrow="ALWAYS"/>
                        <MFXButton onAction="#handleRefreshMessages" text="Refresh Messages" style="-fx-background-color: #e67e22; -fx-text-fill: white;"/>
                    </VBox>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>